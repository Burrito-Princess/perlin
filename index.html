<html>

<head>
  <script src="main.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      overflow-y: hidden;
    }
  </style>
</head>

<body>
  <canvas id="cnvs"></canvas>
  <script>
    "use strict";
    let cnvs = document.getElementById("cnvs");
    //   cnvs.width = cnvs.height = 512;
    cnvs.width = window.innerWidth;
    cnvs.height = window.innerHeight;
    let ctx = cnvs.getContext("2d");

    const GRID_SIZE_X = 10;
    const GRID_SIZE_Y = 10;
    const RESOLUTION = 16;
    const COLOR_SCALE = 250;
    let count = 0;
    const speed = 400;

    let pixel_size = cnvs.width / RESOLUTION;
    let num_pixels_x = GRID_SIZE_X / RESOLUTION;
    let num_pixels_y = GRID_SIZE_Y / RESOLUTION;

    setInterval(function () {
      ctx.clearRect(0, 0, cnvs.width, cnvs.height);
      count += .03;
      for (let y = 0; y < GRID_SIZE_Y; y += num_pixels_y / GRID_SIZE_Y) {
        for (let x = 0; x < GRID_SIZE_X; x += num_pixels_x / GRID_SIZE_X) {
          let v = perlin.get(x + count, y);
          // console.log("X : " + x + "|| Y: " + y + "||" + v)
          // console.log(v);
          if (v <= -3) {
            ctx.fillStyle = "#0006b1"; // deep ocean
          } else if (v <= -2) {
            ctx.fillStyle = "#0021f3"; // shallow waters
          } else if (v <= -1) {
            ctx.fillStyle = "#f8f0a4"; // beach
          } else if (v <= 0) {
            ctx.fillStyle = '#138510'; //meadow
          } else if (v == 0.5){
            ctx.fillStyle = '#306b40'; //tree
          } else if (v <= 1) {
            ctx.fillStyle = "#708C50"; // dry meadow
          } else if (v <= 2) {
            ctx.fillStyle = "#808080"; // mountain
          } else if (v <= 3) {
            ctx.fillStyle = "#f2f2f2"; // snow
          } else {
            ctx.fillStyle = "#ffffff"; // default
          }

          // ctx.fillStyle = "hsl(" + v + ",50%,50%)";
          if (window.innerHeight > window.innerWidth) {
            ctx.fillRect(
              (x / GRID_SIZE_X) * cnvs.height,
              (y / GRID_SIZE_Y) * cnvs.height,
              pixel_size,
              pixel_size
            );
          } else {
            ctx.fillRect(
              (x / GRID_SIZE_X) * cnvs.width,
              (y / GRID_SIZE_Y) * cnvs.width,
              pixel_size,
              pixel_size
            );
          }
          if (count > 0) {

          }

        }

        // debugger;
      }
      // console.log
      // debugger;
      // perlin.remove_mem(num_pixels_y);
    }, speed);
  </script>
</body>

</html>